<%- include("./partials/adminPartials/top.ejs") %> 
               <!-- Start Content -->
                <h1>All Products</h1>
                <div class="new-content">
                    <div class="widget orders">
                        <section class="head">
                            <h4>Products</h4>
                            <div class="buttons">
                                <a href="/admin/addnewproduct">+ New Product</a>
                                <!-- <button>Actions</button> -->
                                <button id="filter"><i class="fa-solid fa-filter"></i> Filter</button>
                            </div>
                        </section> 
                        <form action="" class="select-filter">
                            <section class="container-filter">
                              <div class="search-box">
                                <label for="searchByName">Product Name</label>
                                <input type="search" name="" id="searchByName" placeholder="Name">
                              </div>
                              <div class="search-box">
                                <label for="searchByStatus">Status</label>
                                <select name="statusSearch" id="searchByStatus">
                                    <% ["all","publish","private"].forEach((statue) =>{ %>
                                      <!-- <div data-status="<%= statue %>" class="option <%= statue %>"><%= statue %></div> -->
                                      <option value="<%= statue %>"><%= statue %></option>
                                      <% }) %> 
                                </select>
                              </div>
                              <div class="search-box">
                                <label for="searchByCollection">Collection</label>
                                <!-- <input type="text" name="" id="searchByStatus"> -->
                                <select name="collectionSearch" id="searchByCollection">
                                    <% ["all","glasses","shoes","accessories","panties","shirts"].forEach((statue) =>{ %>
                                      <!-- <div data-status="<%= statue %>" class="option <%= statue %>"><%= statue %></div> -->
                                      <option value="<%= statue %>"><%= statue %></option>
                                      <% }) %> 
                                </select>
                              </div>
                              <!-- <div class="search-box">
                                <label for=""></label>
                                <button>Search</button>
                              </div> -->
                          </section>
                          <!-- <div class="footer-filter">
                            <button>Search</button>
                          </div> -->
                          </form>
                        <section class="table-container">
                            <table>
                                <tr>
                                    <th>#</th>
                                    <th>Product</th>
                                    <th>Price</th>
                                    <th>Status</th>
                                    <th>Collection</th>
                                    <th>Date</th>
                                    <th>Actions</th>
                                </tr>
                                
                                <% allProducts.forEach(product => { %> 
                                    <tr class="row-product">
                                        <td class="product">
                                            <article>
                                                <img src="/uploads/<%=product.images[0]%>" alt="">
                                            </article>
                                        </td>
                                        <td class="product">
                                            <article>
                                            
                                                <div class="name"><%= product.title %></div>
                                            </article>
                                        </td>
                                        <td class="total"><%= product.price %><span>MAD</span></td>
                                        <td class="status">
                                            <!-- <select name="status" class="<%=product.status%>">
                                                <% // ["publish","private"].forEach((statue) =>{ %>
                                                    <% // if(statue == product.status){ %>
                                                        <option value="<%= //statue %>" selected><%=// statue %></option>
                                                    <%// }else{ %>
                                                        <option value="<%=// statue %>"><%= //statue %></option>
                                                    <%// } %> 
                                                    
                                                <%// }) %> 
                                            </select> -->
                                            <!-- select -->
                                            <div class="select <%= product.status %>" data-productid="<%= product._id %>" >
                                                <div class="status">
                                                    <%=product.status%>
                                                    <i class="fa-sharp fa-solid fa-chevron-down"></i>
                                                </div>
                                                    <div class="options pupPri dn">
                                                        <% ["publish","private"].forEach((statue) =>{ %>
                                                        <div data-status="<%= statue %>" class="option <%= statue %>"><%= statue %></div>
                                                        <% }) %> 
                                                    </div>
                                            </div>
                                            <!-- select -->
                                        </td>
                                        <td class="collection"><%= product.type %></td>
                                        <td class="date"><%= product.addedIn %></td>
                                        <td  class="action">
                                            <a href="/admin/allProducts/<%= product._id %>">
                                                <i class="fa-solid fa-eye"></i>
                                            </a>
                                            <a href="/admin/allProducts/update/<%= product._id %>">
                                                <i class="fa-solid fa-pen-to-square"></i>
                                            </a>
                                            <div>
                                                <i data-modal="delete_<%= product._id %>" class="fa-solid fa-trash-can"></i>
                                            </div>
                                            <section id="delete_<%= product._id %>" style="--modal-color:#ea5455" class="modal">
                                                <div class="popup">
                                                    <h3>Delete Product</h3>
                                                    <div class="content-modal">
                                                        Confirm Delete The Product
                                                    </div>
                                                    <div class="footer-modal">
                                                        <a class="confirm-btn" href="/admin/allProducts/delete/<%= product._id %> ">Confirm</a>
                                                        <div class="cancel">Cancel</div>
                                                    </div>
                                                </div>
                                            </section>
                                        </td>
                                    </tr>
                                <% }) %> 
                            </table>
                        </section>
                    </div>
                </div>
                <!-- Start Modal -->
                <section id="status_my_modal" style="--modal-color:#33ab73" class="modal">
                    <div class="popup">
                        <h3>Product Status</h3>
                        <div class="content-modal">
                            Confirm Change Status
                        </div>
                        <div class="footer-modal">
                            <a data-link="/admin/allproducts" class="confirm-btn" href="">Confirm</a>
                            <div class="cancel">Cancel</div>
                        </div>
                    </div>
                </section>
                <!-- End Modal -->
                <!-- End Content -->
                
                        <!--  Start Last Popup -->
                        <% if(msg_lastPopup){ %> 
                            <div class="container-last-popup">
                                <div class="last-popup">
                                    <div class="p-action"><%= msg_lastPopup %></div>
                                    <div class="icon-check">
                                        <i class="fa-solid fa-check"></i>
                                    </div>
                                </div>
                            </div>
                        <% } %> 
                        <% if(msg_lastPopup_delete){ %> 
                            <div class="container-last-popup">
                                <div class="last-popup delete">
                                    <div class="p-action"><%= msg_lastPopup_delete %></div>
                                    <div class="icon-check">
                                        <i class="fa-solid fa-check"></i>
                                    </div>
                                </div>
                            </div>
                        <% } %> 
                        <!--  End Last Popup -->
<%- include("./partials/adminPartials/bottom.ejs") %> 